"use strict";(self.webpackChunk_asu_app_webdir_ui=self.webpackChunk_asu_app_webdir_ui||[]).push([[110],{"./src/SearchPage/components/SearchMessage.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>SearchMessage});var prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_index_styles__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/SearchPage/components/index.styles.js");const SearchMessage=({term,number,loggedIn,engine,GASource})=>{const[paramString,setParamString]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const string=function getParamString(){let returnToString="";try{const paramsIterator=new URLSearchParams(window.location.search);return returnToString=`search-tabs=${paramsIterator.get("search-tabs")}&q=${paramsIterator.get("q")}`,returnToString}catch(error){return console.error(error),""}}();setParamString(string)}),[]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_index_styles__WEBPACK_IMPORTED_MODULE_1__.A,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,"Your search for "),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"search-message-emphasis"},term," "),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,"returned "),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"search-message-emphasis"},number," "),"all faculty and staff results"===GASource&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,"faculty and staff "),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null," ",!loggedIn&&"web_dir_students"===engine&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,"public")," results."," "),!loggedIn&&"web_dir_students"===engine&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{href:`/caslogin?returnto=${encodeURIComponent(`/?${paramString}`)}`},"Sign in")," ","to view all student results."))};SearchMessage.displayName="SearchMessage",SearchMessage.propTypes={term:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,number:prop_types__WEBPACK_IMPORTED_MODULE_2___default().number,loggedIn:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,engine:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,GASource:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string},SearchMessage.__docgenInfo={description:"",methods:[],displayName:"SearchMessage",props:{term:{description:"",type:{name:"string"},required:!1},number:{description:"",type:{name:"number"},required:!1},loggedIn:{description:"",type:{name:"bool"},required:!1},engine:{description:"",type:{name:"string"},required:!1},GASource:{description:"",type:{name:"string"},required:!1}}}},"./src/SearchPage/components/index.styles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>SearchMessageLayout,j:()=>SortLayout});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const SortLayout=styled_components__WEBPACK_IMPORTED_MODULE_0__.Ay.div`
  .sort-form {
    margin: 0;
    max-width: 75%;

    label {
      margin-right: 16px;
      margin-bottom: 0;
      line-height: 36px;
      text-align: center;
      white-space: nowrap;
    }
  }
`,SearchMessageLayout=styled_components__WEBPACK_IMPORTED_MODULE_0__.Ay.div`
  .search-message-emphasis {
    font-weight: bold;
  }
`},"./src/SearchPage/components/sort.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>SortPicker});var prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_shared__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../shared/index.js"),_index_styles__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/SearchPage/components/index.styles.js");const SortPicker=({sort,onChange,customSortOptions})=>{const[defaultSortValue,setDefaultSortValue]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(sort),sortOptions=customSortOptions||[{value:"_score_desc",label:"Relevancy"},{value:"last_name_asc",label:"Last Name (ascending)"},{value:"last_name_desc",label:"Last Name (descending)"}],getSortEventText=()=>{let text=sortOptions.find((op=>op.value===sort))?.label;return"Relevancy"===text&&(text="Sort by Relevancy"),text};return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>((sortParam=>{const arr=sortOptions.filter((option=>option.value===sortParam&&!option.disabled));arr.length>=1?setDefaultSortValue(arr[0].value):setDefaultSortValue("default")})(sort),()=>setDefaultSortValue("default"))),[sort]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_index_styles__WEBPACK_IMPORTED_MODULE_2__.j,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("form",{className:"uds-form sort-form faculty-sort"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"form-group"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{htmlFor:"sortBySelect"},"Sort by"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("select",{className:"form-select",id:"sortBySelect",onChange:event=>{var newSort;newSort=event.target.value,onChange(newSort),(0,_shared__WEBPACK_IMPORTED_MODULE_1__.u_)({event:"collapse",action:"close",name:"onclick",type:"click",section:"all asu search",text:getSortEventText()}),setDefaultSortValue(event.target.value)},onClick:()=>{(0,_shared__WEBPACK_IMPORTED_MODULE_1__.u_)({event:"collapse",action:"open",name:"onclick",type:"click",section:"all asu search",text:getSortEventText()})},value:defaultSortValue},sortOptions.map((op=>Object.prototype.hasOwnProperty.call(op,"disabled")?react__WEBPACK_IMPORTED_MODULE_0__.createElement("option",{disabled:!0,key:op.label,value:"default"},op.label):react__WEBPACK_IMPORTED_MODULE_0__.createElement("option",{key:op.label,value:op.value},"Relevancy"===op.label?"Sort by Relevancy":op.label)))))))};SortPicker.displayName="SortPicker",SortPicker.propTypes={sort:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,onChange:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,customSortOptions:prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_3___default().shape({value:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,label:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string}))},SortPicker.__docgenInfo={description:"React component for selecting and displaying sorting options.\n\n@param {Object} props - The props for configuring the sorting picker.\n@param {string} props.sort - The currently selected sort option.\n@param {function} props.onChange - The function to handle sort option changes.\n@param {Array} [props.customSortOptions] - Custom sorting options to display.\n@returns {JSX.Element} The SortPicker component.",methods:[],displayName:"SortPicker",props:{sort:{description:"",type:{name:"string"},required:!1},onChange:{description:"",type:{name:"func"},required:!1},customSortOptions:{description:"",type:{name:"arrayOf",value:{name:"shape",value:{value:{name:"string",required:!1},label:{name:"string",required:!1}}}},required:!1}}}},"./src/SearchResultsList/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ASUSearchResultsList});var libCore_es=__webpack_require__("./node_modules/@asu/components-core/dist/libCore.es.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("../../node_modules/react/index.js"),shared=__webpack_require__("../../shared/index.js"),search=__webpack_require__("./src/helpers/search.js"),SearchMessage=__webpack_require__("./src/SearchPage/components/SearchMessage.js");const SearchResultsList=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js").Ay.div`
  max-width: 100%;

  .uds-results-card {
    margin-bottom: 48px;
  }
  .micro,
  .preview {
    .results-found {
      -webkit-mask-image: -webkit-gradient(
        linear,
        left 60%,
        left bottom,
        from(rgba(0, 0, 0, 1)),
        to(rgba(0, 0, 0, 0.2))
      );
    }
  }
  .uds-person-profile:not(:first-child) {
    padding-top: 32px;
  }
  .large {
    .uds-person-profile,
    .uds-results-card {
      padding-top: 48px;
      border-top: 1px solid #d0d0d0;

      :first-child {
        border: none;
      }
    }
  }
  .micro {
    max-width: 500px;
  }
  .results-title {
    font-size: 40px;
    font-weight: bold;
    max-width: 100%;
  }
  .results-found {
    margin-bottom: 32px;
    span {
      font-weight: bold;
    }
  }
  .results-title-small {
    margin-bottom: 32px;
    font-size: 26px;
    font-weight: bold;
  }
  .summary {
    display: flex;
    justify-content: space-between;
  }
  .summary-button {
    display: flex;
    justify-content: center;
    margin-top: 16px;
  }
  .micro-options {
    margin-top: 48px;
    display: flex;
    justify-content: space-between;

    &.push-right {
      justify-content: flex-end;
    }
  }
`,ASUSearchResultsList=({term,sort,type,engine,titleText,showSearchMessage,seeAllResultsText,itemsPerPage,onExpandClick,GASource,setPromotedResult,hidePaginator,registerResults,filters,loggedIn,profilesToFilterOut,display,appPathFolder,localSection,rankGroup,icon,restClientTag})=>{const[results,setResults]=(0,react.useState)([]),[isLoading,setIsLoading]=(0,react.useState)(!0),[subtitle,setSubtitle]=(0,react.useState)(null),[currentPage,setCurrentPage]=(0,react.useState)(1),[totalResults,setTotalResults]=(0,react.useState)(null),cardSize="micro"===type?"micro":"large",searchList=(0,react.useRef)(null),controller=new AbortController,doSearch=(page=currentPage)=>{(term&&term.length>0||!engine.needsTerm)&&(setIsLoading(!0),(0,search.eF)({engine,term,page,itemsPerPage,sort,filters,display,rankGroup,controller,size:display?.profilesPerPage,restClientTag}).then((res=>{const filteredResults=res;"employee_weight"===sort&&"people_in_dept"===engine?.name&&(filteredResults.results=filteredResults.results.filter((result=>Object.keys(result).length>1)));const formattedResults=engine.formatter({results:filteredResults,page,itemsPerPage,cardSize,filters,appPathFolder:appPathFolder||engine.appPathFolder,localSection,props:{API_URL:engine.API_URL,searchApiVersion:engine.searchApiVersion,loggedIn}});registerResults&&registerResults(formattedResults.page.total_results),"GET"===engine.method&&setCurrentPage("employee_weight"===sort?formattedResults.page.current+1:formattedResults.page.current),"POST"===engine.method?setTotalResults(filteredResults[0]?.total_results):setTotalResults(formattedResults.page.total_results);const resultsWithProps=formattedResults.results.map(((profile,idx)=>{const newProps={...profile.props,key:idx,GASource};return{...profile,props:newProps,key:profile.props?.children?.key??idx}}));setPromotedResult&&setPromotedResult(formattedResults.topResult),setResults(resultsWithProps),showSearchMessage&&setSubtitle(react.createElement(SearchMessage.Q,{term,number:formattedResults.page.total_results,loggedIn,engine:engine.name,GASource})),setIsLoading(!1),(0,shared.u_)({event:"search",action:"type",name:"onenter",type:"search asu.edu",section:"search",text:term})})).catch((err=>{console.error(err),setIsLoading(!1)})))};(0,react.useEffect)((()=>(doSearch(1),()=>controller?.abort())),[term,sort,filters,itemsPerPage,profilesToFilterOut]);const seeMoreButton=react.createElement(libCore_es.$n,{color:"maroon",label:seeAllResultsText,size:"small",onClick:()=>function expandClick(text){(0,shared.u_)({event:"link",action:"click",name:"onclick",type:"internal link",section:GASource,text}),onExpandClick()}("See all results from subdomain")});return react.createElement(SearchResultsList,null,!isLoading&&react.createElement("div",{className:type},subtitle&&"micro"!==type&&react.createElement("div",{className:"message"},react.createElement("div",{className:"results-search-message"},subtitle)),titleText&&react.createElement("div",{className:"results-title"+("micro"===type?"-small":"")},titleText," ",icon&&react.createElement("i",{className:`${icon?.[0]} fa-${icon?.[1]}`})),results.length>0&&!isLoading?react.createElement("div",{ref:searchList,className:"results-found"},results):react.createElement("div",{className:"results-found"},"No results found"),!hidePaginator&&totalResults>=itemsPerPage&&react.createElement(libCore_es.dK,{type:"default",background:"white",currentPage,totalPages:Math.ceil(totalResults/itemsPerPage)>100?100:Math.ceil(totalResults/itemsPerPage),onChange:(e,action)=>{return setCurrentPage(val=action),doSearch(val),void(results.length>0&&(searchList.current.scrollIntoView(!0),searchList.current.firstElementChild.focus()));var val},showFirstButton:!0,showLastButton:!0}),"preview"===type&&react.createElement("div",{className:"summary"},seeMoreButton),"micro"===type&&react.createElement("div",{className:"summary"},subtitle,seeMoreButton)),isLoading&&react.createElement("div",null,"Loading..."))};ASUSearchResultsList.displayName="ASUSearchResultsList",ASUSearchResultsList.propTypes={term:prop_types_default().string,type:prop_types_default().string,engine:prop_types_default().object,seeAllResultsText:prop_types_default().string,sort:prop_types_default().string,titleText:prop_types_default().string,showSearchMessage:prop_types_default().bool,itemsPerPage:prop_types_default().number,onExpandClick:prop_types_default().func,GASource:prop_types_default().string,setPromotedResult:prop_types_default().func,hidePaginator:prop_types_default().bool,registerResults:prop_types_default().func,filters:prop_types_default().object,loggedIn:prop_types_default().bool,profilesToFilterOut:prop_types_default().string,display:prop_types_default().shape({defaultSort:prop_types_default().string,doNotDisplayProfiles:prop_types_default().string,profilesPerPage:prop_types_default().string,usePager:prop_types_default().string}),appPathFolder:prop_types_default().string,localSection:prop_types_default().bool,rankGroup:prop_types_default().string,icon:prop_types_default().arrayOf(prop_types_default().string),restClientTag:prop_types_default().string},ASUSearchResultsList.__docgenInfo={description:"React component for displaying search results.\n@param {Object} props - The props for configuring the ASUSearchResultsList component.\n@param {string} term - The search term.\n@param {string} sort - The sorting option.\n@param {string} type - The type of results must be 'micro', 'preview', or 'full'.\n@param {Object} engine - The search engine configuration.\n@param {string} titleText - The title text for the search results.\n@param {boolean} showSearchMessage - Indicates whether to show a search message.\n@param {string} seeAllResultsText - The text for seeing all results.\n@param {number} itemsPerPage - The number of items per page.\n@param {function} onExpandClick - Callback function for expanding results.\n@param {string} GASource - The Google Analytics source for tracking.\n@param {function} setPromotedResult - Callback function for setting promoted results.\n@param {boolean} hidePaginator - Indicates whether to hide the paginator.\n@param {function} registerResults - Callback function for registering results.\n@param {Object} filters - Filters for the search.\n@param {boolean} loggedIn - Indicates whether the user is logged in.\n@param {Array} profilesToFilterOut - Profiles to filter out from the results.\n@param {string} display - Display options for the results.\n@param {string} appPathFolder - The base path for the application folder.\n@param {boolean} localSection - Indicates whether the results belong to a local section.\n@param {string} rankGroup - The rank group for the results.\n@param {Array} icon - Icon information for the results.\n@returns {JSX.Element} The ASUSearchResultsList component.",methods:[],displayName:"ASUSearchResultsList",props:{term:{description:"",type:{name:"string"},required:!1},type:{description:"",type:{name:"string"},required:!1},engine:{description:"",type:{name:"object"},required:!1},seeAllResultsText:{description:"",type:{name:"string"},required:!1},sort:{description:"",type:{name:"string"},required:!1},titleText:{description:"",type:{name:"string"},required:!1},showSearchMessage:{description:"",type:{name:"bool"},required:!1},itemsPerPage:{description:"",type:{name:"number"},required:!1},onExpandClick:{description:"",type:{name:"func"},required:!1},GASource:{description:"",type:{name:"string"},required:!1},setPromotedResult:{description:"",type:{name:"func"},required:!1},hidePaginator:{description:"",type:{name:"bool"},required:!1},registerResults:{description:"",type:{name:"func"},required:!1},filters:{description:"",type:{name:"object"},required:!1},loggedIn:{description:"",type:{name:"bool"},required:!1},profilesToFilterOut:{description:"",type:{name:"string"},required:!1},display:{description:"",type:{name:"shape",value:{defaultSort:{name:"string",required:!1},doNotDisplayProfiles:{name:"string",required:!1},profilesPerPage:{name:"string",required:!1},usePager:{name:"string",required:!1}}},required:!1},appPathFolder:{description:"",type:{name:"string"},required:!1},localSection:{description:"",type:{name:"bool"},required:!1},rankGroup:{description:"",type:{name:"string"},required:!1},icon:{description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},restClientTag:{description:"",type:{name:"string"},required:!1}}}},"./src/helpers/search.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ry:()=>engineNames,sP:()=>engines,eF:()=>performSearch});var dataConverter=__webpack_require__("./src/helpers/dataConverter.js");function validateAndCleanURL(url){try{const urlObj=new URL(url),pathname=urlObj.pathname.replace(/\/+/g,"/");return new URL(`${urlObj.protocol}//${urlObj.host}${pathname}${urlObj.search}`)}catch(e){throw new Error("Invalid URL",e.message)}}const axios=__webpack_require__("../../node_modules/axios/dist/browser/axios.cjs"),engineNames={FACULTY:"web_dir_faculty_staff",STUDENTS:"web_dir_students",SITES:"web_sites",SITES_LOCAL:"web_sites_local",WEB_DIRECTORY_DEPARTMENTS:"people_in_dept",WEB_DIRECTORY_PEOPLE_AND_DEPS:"profiles_dept_and_people",WEB_DIRECTORY_FACULTY_RANK:"web_dir_faculty_rank"};function logClick(query,docId,reqId,tags,{...props}){return new Promise((async function sendData(resolve,reject){const data={query,doc_id:docId,req_id:reqId,tags};let response;if(props.loggedIn){const headers={"X-CSRF-Token":(await axios.get(`${props.API_URL}/session/token`)).data};response=await axios.post(`${props.API_URL}${props.searchApiVersion}webdir-click`,data,{headers}),resolve(response.data)}else response=await axios.post(`${props.API_URL}${props.searchApiVersion}webdir-click`,data),resolve(response.data);reject(response.data)}))}const standardFormatter=({engineName,results,cardSize,appPathFolder,localSection,props})=>{const topResult=((results,engineName)=>{const topResult=results.reduce(((prev,curr)=>null===prev||prev._meta.score<curr._meta.score?curr:prev),null),thresholdScore="web_dir_faculty_staff"===engineName?100:1;return topResult&&topResult._meta.score>=thresholdScore?topResult:null})(results.results,engineName);return{tab:engineName,page:results.meta.page,results:results.results.map((result=>engines[engineName].converter({datum:result,options:{size:cardSize,fill:!1},appPathFolder,logClick,requestId:results.meta.request_id,localSection,props:{...props}}))),topResult:null===topResult?null:engines[engineName].converter({datum:topResult,options:{size:"small",profileURLBase:engines[engineName].profileURLBase,fill:!0},appPathFolder,logClick,requestId:results.meta.request_id,props:{...props}})}},webDirDeptsFormatter=({engineName,results,cardSize,filters,appPathFolder})=>{let localResults=null,localPage=1;engines[engineName].name===engineNames.WEB_DIRECTORY_PEOPLE_AND_DEPS?localResults=results.map((datum=>{const{full_record,...basicFields}=datum;return{...basicFields,...full_record}})):(localResults=results.results,localPage=results.meta.page),filters&&filters.peopleIds&&(localResults=localResults.filter((r=>filters.peopleIds.includes(r.asurite_id.raw))));const titleOverwrite=filters&&filters.peopleInDepts?{peopleInDeps:filters.peopleInDepts}:{depts:filters?.deptIds};return{tab:engines[engineName].name,page:localPage,results:localResults.map((result=>{try{return engines[engineName].converter({datum:result,options:{size:"large",titleMatch:titleOverwrite,profileURLBase:"https://search.asu.edu"},appPathFolder})}catch(e){return console.log(e,result),null}}))}},engines={[engineNames.FACULTY]:{name:engineNames.FACULTY,url:"webdir-profiles/faculty-staff",needsAuth:!1,converter:dataConverter.LU,resultsPerSummaryPage:3,supportedSortTypes:["_score_desc","last_name_asc","last_name_desc"],method:"GET",formatter:({results,cardSize,filters=null,appPathFolder})=>standardFormatter({engineName:engineNames.FACULTY,results,cardSize,appPathFolder}),needsTerm:!0},[engineNames.STUDENTS]:{name:engineNames.STUDENTS,url:"webdir-profiles/students",needsAuth:!0,converter:dataConverter.Ls,resultsPerSummaryPage:3,supportedSortTypes:["_score_desc","last_name_asc","last_name_desc"],method:"GET",formatter:({results,cardSize,filters=null,appPathFolder})=>standardFormatter({engineName:engineNames.STUDENTS,results,cardSize,appPathFolder}),needsTerm:!0},[engineNames.SITES]:{name:engineNames.SITES,url:"webdir-search/web",needsAuth:!1,converter:dataConverter.zy,resultsPerSummaryPage:6,supportedSortTypes:["_score_desc","date_desc"],method:"GET",formatter:(results,cardSize,filters=null,appPathFolder,localSection=null,{...props})=>standardFormatter(engineNames.SITES_LOCAL),needsTerm:!0},[engineNames.SITES_LOCAL]:{name:engineNames.SITES_LOCAL,url:"webdir-search/web",needsAuth:!1,converter:dataConverter.zy,resultsPerSummaryPage:6,supportedSortTypes:["_score_desc","date_desc"],method:"GET",formatter:({results,cardSize,filters=null,appPathFolder,localSection=null,props:{...props}})=>standardFormatter({engineName:engineNames.SITES_LOCAL,results,cardSize,appPathFolder,localSection,props:{...props}}),needsTerm:!0},[engineNames.WEB_DIRECTORY_DEPARTMENTS]:{name:engineNames.WEB_DIRECTORY_DEPARTMENTS,url:"webdir-profiles/faculty-staff/filtered",needsAuth:!1,converter:dataConverter.LU,resultsPerSummaryPage:6,supportedSortTypes:["_score_desc","last_name_desc","last_name_asc","employee_weight"],method:"GET",formatter:({results,cardSize,filters,appPathFolder})=>webDirDeptsFormatter({engineName:engineNames.WEB_DIRECTORY_DEPARTMENTS,results,cardSize,filters,appPathFolder}),needsTerm:!1},[engineNames.WEB_DIRECTORY_FACULTY_RANK]:{name:engineNames.WEB_DIRECTORY_FACULTY_RANK,url:"webdir-profiles/faculty-staff/filtered",needsAuth:!1,converter:dataConverter.LU,resultsPerSummaryPage:6,supportedSortTypes:["faculty_rank"],method:"GET",formatter:({results,cardSize,filters,appPathFolder})=>webDirDeptsFormatter({engineName:engineNames.WEB_DIRECTORY_DEPARTMENTS,results,cardSize,filters,appPathFolder}),needsTerm:!1},[engineNames.WEB_DIRECTORY_PEOPLE_AND_DEPS]:{name:engineNames.WEB_DIRECTORY_PEOPLE_AND_DEPS,url:"webdir-profiles/department",needsAuth:!1,converter:dataConverter.LU,resultsPerSummaryPage:6,supportedSortTypes:["_score_desc","last_name_desc","last_name_asc"],method:"POST",formatter:({results,cardSize,filters,appPathFolder})=>webDirDeptsFormatter({engineName:engineNames.WEB_DIRECTORY_PEOPLE_AND_DEPS,results,cardSize,filters,appPathFolder}),needsTerm:!1}},performSearch=function({engine,term,page,itemsPerPage,sort,filters,display,rankGroup,controller,size,restClientTag}){return new Promise((async function search(resolve,reject){const currentSort=engine.supportedSortTypes.includes(sort)?sort:"";let query=`${engine.API_URL?`${engine.API_URL}${engine.searchApiVersion}`:"https://dev-asu-isearch.ws.asu.edu/api/v1/"}${engine.url}`,APICall=null;if("GET"===engine.method){if(query=`${query}?sort-by=${currentSort}`,"employee_weight"===currentSort&&(query=`${engine.API_URL}endpoint/v1/department/custom-sort?`),term&&(query=`${query}&query=${term}`),page&&"employee_weight"===currentSort?query=`${query}&page=${page-1}`:page&&(query=`${query}&page=${page}`),engine.site&&(query=`${query}&url_host=${engine.site}`),itemsPerPage&&"employee_weight"===sort?query=`${query}&items_per_page=${itemsPerPage}`:itemsPerPage&&(query=`${query}&size=${itemsPerPage}`),filters&&filters.deptIds){query=`${query}&dept_ids=${filters.deptIds.map((n=>`${n}`)).join(",")}`}if(display?.doNotDisplayProfiles){query=`${query}&${`profiles_to_exclude=${display.doNotDisplayProfiles}`}`}if(filters&&filters.peopleIds){query=`${query}&asurite_ids=${filters.peopleIds.map((n=>`${n}`)).join(",")}`}if(filters&&filters.title){query=`${query}&${`title=${filters.title}`}`}if(filters&&filters.campuses){query=`${query}&${`campuses=${filters.campuses}`}`}if(filters&&filters.expertise){query=`${query}&${`expertise_areas=${filters.expertise}`}`}if(filters&&filters.employee){query=`${query}&${`employee_types=${filters.employee}`}`}if(filters&&filters.lastInit){query=`${query}&${`last_init=${filters.lastInit}`}`}rankGroup&&(query=`${query}&rank_group=${rankGroup}`),restClientTag&&(query=`${query}&client=${restClientTag}`);const validatedQueryUrl=validateAndCleanURL(query);APICall=()=>axios.get(validatedQueryUrl,{signal:controller.signal})}else{if(!filters)return;const validatedTokenUrl=validateAndCleanURL(`${engine.API_URL}/session/token`),headers={"X-CSRF-Token":(await axios.get(validatedTokenUrl)).data},data={size,page,"sort-by":currentSort||"",full_records:!0,profiles:filters.peopleInDepts,last_init:filters.lastInit||null,profiles_to_exclude:display.doNotDisplayProfiles||null};restClientTag&&(query=`${query}?&client=${restClientTag}`);const validatedDataUrl=validateAndCleanURL(query);APICall=()=>axios.post(validatedDataUrl,data,{headers})}APICall().then((res=>{const{data}=res;resolve(data)})).catch((err=>{403===err.response?.status&&reject(403)}))}))}}}]);
//# sourceMappingURL=110.8a8a6d33.iframe.bundle.js.map